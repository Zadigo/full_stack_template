(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["profile"],{1269:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("base-card",[a("h2",[t._v("Welcome "),a("strong",[t._v(t._s(t.firstName)+",")])])])],1),a("div",{staticClass:"col-12"},[a("base-card",{staticClass:"mt-2"},[a("img",{staticClass:"img-fluid",attrs:{src:s("9100"),alt:"overview",role:"img","aria-label":"Account overview"}})])],1)])])},r=[],n=s("5530"),o=s("2f62"),i={name:"ProfileIndex",computed:Object(n["a"])({},Object(o["e"])("profileModule",{firstName:function(t){return t.userDetails.myuser.firstname}}))},c=i,d=s("2877"),l=Object(d["a"])(c,a,r,!1,null,null,null);e["default"]=l.exports},"19b4":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",[s("base-validation-card",{attrs:{position:0},on:{validateAction:t.sendChanges},scopedSlots:t._u([{key:"cardHeader",fn:function(){return[s("header",{staticClass:"card-header"},[s("b-image",{attrs:{src:"https://images.pexels.com/photos/1447885/pexels-photo-1447885.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=100&w=100",alt:"avatar",ratio:"1by1",rounded:!0}})],1)]},proxy:!0}])},[s("fields-iterator",{attrs:{formFields:t.fields},on:{startAction:t.changeItems}})],1)],1)},r=[],n=(s("b64b"),s("159b"),s("b0c0"),s("db95")),o=s("04e7"),i=s("2ef0"),c={name:"ProfileIndex",components:{FieldsIterator:o["a"],BaseValidationCard:n["a"]},data:function(){return{changedValues:{},fields:[{id:1,type:"text",name:"firstname",placeholder:"Firstname",label:"Firstname",autocomplete:"given-name",value:null,prefilled:!0},{id:2,type:"text",name:"lastname",placeholder:"Lastname",label:"Lastname",autocomplete:"family-name",value:null,prefilled:!0},{id:3,type:"email",name:"email",placeholder:"Email",label:"Email",autocomplete:"email",value:null,prefilled:!0}]}},beforeRouteLeave:function(t,e,s){Object.keys(this.changedValues).length>0&&console.log("You have unfinished unsaved data"),s()},mounted:function(){var t=this.$store.state.profileModule.userDetails.myuser;i.forEach(this.fields,(function(e){e["value"]=t[e.name]}))},methods:{changeItems:function(t,e){this.changedValues[t]=e},sendChanges:function(t){var e=this;this.$api.profile.updateDetails(t,this.changedValues).then((function(t){e.changedValues={},e.$store.dispatch("profileModule/updatePersonalDetails",t)})).catch((function(t){console.error(t)}))}}},d=c,l=s("2877"),u=Object(l["a"])(d,a,r,!1,null,null,null);e["default"]=u.exports},"1f0e":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("base-card",[s("b-list-group",[s("b-list-group-item",[s("b-form-checkbox",{attrs:{id:"newsletter"},on:{change:t.updatePreferences},model:{value:t.userOptions["newsletter"],callback:function(e){t.$set(t.userOptions,"newsletter",e)},expression:"userOptions['newsletter']"}},[s("span",{staticClass:"m-2"},[t._v("I would like to get updates related to newsletters")])])],1),s("b-list-group-item",[s("b-form-checkbox",{attrs:{id:"another"},model:{value:t.userOptions["another"],callback:function(e){t.$set(t.userOptions,"another",e)},expression:"userOptions['another']"}},[s("span",{staticClass:"m-2"},[t._v("I would like to get updates related to newsletters")])])],1),s("b-list-group-item",[s("b-form-checkbox",{attrs:{id:"other"},model:{value:t.userOptions["other"],callback:function(e){t.$set(t.userOptions,"other",e)},expression:"userOptions['other']"}},[s("span",{staticClass:"m-2"},[t._v("I would like to get updates related to newsletters")])])],1)],1)],1)},r=[],n={name:"Preferences",title:function(){return"Preferences"},data:function(){return{userOptions:{}}},methods:{updatePreferences:function(){var t=this;this.$api.profile.updatePreferences(this.userOptions).then((function(e){console.log(e),t.$buefy.snackbar.open({message:"Yellow button and positioned on top, click to close",type:"is-warning",position:"is-top",duration:3500})})).catch((function(t){console.log(t)}))}}},o=n,i=s("2877"),c=Object(i["a"])(o,a,r,!1,null,null,null);e["default"]=c.exports},"301b":function(t,e,s){},"4eb6":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{attrs:{id:"addresses"}},[0!==t.addresses.length||t.addNew?t.addNew?a("base-card",{scopedSlots:t._u([{key:"cardFooter",fn:function(){return[t.createMode?a("button",{staticClass:"btn btn-primary btn-md",on:{click:t.sendChanges}},[a("font-awesome-icon",{attrs:{icon:"check"}}),t._v(" Validate ")],1):a("button",{staticClass:"btn btn-primary btn-md",on:{click:t.updateAddress}},[a("font-awesome-icon",{attrs:{icon:"check"}}),t._v(" Update ")],1),a("button",{staticClass:"btn btn-outline-primary btn-md",on:{click:function(e){return t.$router.go(-1)}}},[a("font-awesome-icon",{attrs:{icon:"check"}}),t._v(" Cancel ")],1)]},proxy:!0}])},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.newAddress["street_address"],expression:"newAddress['street_address']"}],staticClass:"form-control",attrs:{type:"text",id:"street-address",placeholder:"1 rue de Rivoli",autocomplete:"address-line1"},domProps:{value:t.newAddress["street_address"]},on:{input:function(e){e.target.composing||t.$set(t.newAddress,"street_address",e.target.value)}}})]),a("div",{staticClass:"form-group mt-2"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.newAddress["city"],expression:"newAddress['city']"}],staticClass:"form-control",attrs:{type:"text",id:"address2",placeholder:"City",autocomplete:"address-level2"},domProps:{value:t.newAddress["city"]},on:{input:function(e){e.target.composing||t.$set(t.newAddress,"city",e.target.value)}}})]),a("div",{staticClass:"form-group mt-2"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.newAddress["zip_code"],expression:"newAddress['zip_code']"}],staticClass:"form-control",attrs:{type:"text",id:"postal-code",placeholder:"75001",autocomplete:"postal-code"},domProps:{value:t.newAddress["zip_code"]},on:{input:function(e){e.target.composing||t.$set(t.newAddress,"zip_code",e.target.value)}}})]),a("div",{staticClass:"form-group mt-2"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.newAddress["country"],expression:"newAddress['country']"}],staticClass:"form-control",attrs:{type:"text",id:"country",placeholder:"France",autocomplete:"country-name"},domProps:{value:t.newAddress["country"]},on:{input:function(e){e.target.composing||t.$set(t.newAddress,"country",e.target.value)}}})])]):a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[t._l(t.addresses,(function(e,s){return a("base-card",{key:e.id,class:{"mt-2":s>=1},scopedSlots:t._u([{key:"cardFooter",fn:function(){return[a("footer",{staticClass:"card-footer"},[a("button",{staticClass:"card-footer-item",on:{click:function(s){return t.deleteAddress(e.id)}}},[a("font-awesome-icon",{attrs:{icon:"trash"}})],1),a("button",{staticClass:"card-footer-item",on:{click:function(s){return t.retrieveAddressToUpdate(e.id)}}},[a("font-awesome-icon",{attrs:{icon:"pen"}})],1)])]},proxy:!0}],null,!0)},[a("b-card-body",[t._v(" "+t._s(e.street_address)+", "+t._s(e.zip_code)+" "),a("b-checkbox",{attrs:{id:"address_"+e.id,checked:e.is_main},on:{change:function(s){return t.mainAddress(e.id)}}},[a("span",{staticClass:"ml-2"},[t._v("Use as main address")])])],1)],1)})),a("base-card",{staticClass:"text-center mt-2"},[a("button",{staticClass:"btn btn-lg btn-primary",on:{click:function(e){t.addNew=!0}}},[t._v(" Create new ")])])],2)]):a("base-card",[a("b-card-body",{staticClass:"text-center"},[a("h2",{staticClass:"mb-4"},[t._v("You have no addresses")]),a("img",{staticClass:"img-fluid",attrs:{src:s("9100"),alt:"addresses"}}),a("button",{staticClass:"btn btn-primary btn-lg m-0 mt-4",on:{click:function(e){t.addNew=!0}}},[t._v("Add new")])])],1)],1)},r=[],n=s("5530"),o=(s("159b"),s("b64b"),s("2f62")),i=s("2ef0"),c={name:"Addresses",title:function(){return"Addresses"},data:function(){return{addNew:!1,newAddress:{is_main:!1},createMode:!0}},computed:Object(n["a"])({},Object(o["e"])("profileModule",{addresses:function(t){return t.userDetails.addresses}})),methods:{sendChanges:function(){var t=this;this.addNew=!1,this.$api.profile.createAddress(this.newAddress).then((function(e){t.$store.dispatch("profileModule/newAddress",e)})).catch((function(t){console.log(t)})),this.newAddress={}},deleteAddress:function(t){var e=this;this.$api.profile.removeAddress({id:t}).then((function(s){e.$store.dispatch("profileModule/deleteAddress",t)})).catch((function(t){console.error(t)}))},retrieveAddressToUpdate:function(t){var e=this,s=this.$store.getters["profileModule/getAddress"](t);i.forEach(Object.keys(s),(function(t){e.newAddress[t]=s[t]})),this.createMode=!1,this.addNew=!0},updateAddress:function(){var t=this;this.$api.profile.modifyAddress(this.newAddress).then((function(e){t.$store.dispatch("profileModule/updateAddress",e),t.createMode=!0,t.addNew=!1})).catch((function(t){console.log(t)}))},mainAddress:function(t){this.$store.commit("profileModule/chooseMainAddress",t)}}},d=c,l=s("2877"),u=Object(l["a"])(d,a,r,!1,null,null,null);e["default"]=u.exports},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,s){var a=s("1d80"),r=s("5899"),n="["+r+"]",o=RegExp("^"+n+n+"*"),i=RegExp(n+n+"*$"),c=function(t){return function(e){var s=String(a(e));return 1&t&&(s=s.replace(o,"")),2&t&&(s=s.replace(i,"")),s}};t.exports={start:c(1),end:c(2),trim:c(3)}},7156:function(t,e,s){var a=s("861d"),r=s("d2bb");t.exports=function(t,e,s){var n,o;return r&&"function"==typeof(n=e.constructor)&&n!==s&&a(o=n.prototype)&&o!==s.prototype&&r(t,o),t}},"752c":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12 col-md-12 mt-3"},[a("h3",{staticClass:"py-4"},[a("a",{attrs:{href:"http://stripe.com/",target:"_blank"}},[a("img",{staticClass:"img-fluid",attrs:{src:s("de29"),alt:"stripe"}})])])]),a("div",{staticClass:"col-12"},[a("base-card",{scopedSlots:t._u([{key:"cardFooter",fn:function(){return[a("i",{staticClass:"fa fa-cc-visa mr-2"}),a("i",{staticClass:"fa fa-cc-mastercard mr-2"})]},proxy:!0}])},[a("div",{staticClass:"form-group my-3"},[a("b-checkbox",{attrs:{id:"register"}},[a("span",{staticClass:"m-3"},[t._v("Register for future payments")])])],1),a("button",{staticClass:"btn btn-lg btn-block btn-primary",on:{click:t.requestPayment}},[t._v(" Pay - $0 ")])]),a("base-card",{staticClass:"mt-2"},[t._v(" By doing this you are aggreeing with "),a("router-link",{attrs:{to:{name:"terms_of_use"},target:"_blank"}},[t._v("CGV")]),t._v(" and "),a("router-link",{attrs:{to:{name:"terms_of_conditions"},target:"_blank"}},[t._v("CGU")])],1)],1),t._m(0)])},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-3"},[s("div",{staticClass:"row mt-3 text-muted"},[s("div",{staticClass:"col-12"},[s("i",{staticClass:"fa fa-lock fa-2x"})])])])}],n={name:"SubscriptionPayment",props:["price"],data:function(){return{completed:!1}},methods:{requestPayment:function(){this.$router.push({name:"profile_subscriptions"})}}},o=n,i=s("2877"),c=Object(i["a"])(o,a,r,!1,null,null,null);e["default"]=c.exports},"90b9":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{attrs:{id:"account"}},[s("base-card",{scopedSlots:t._u([{key:"cardFooter",fn:function(){return[s("footer",{staticClass:"card-footer bg-white"},[s("button",{staticClass:"btn btn-sm btn-danger",on:{click:t.deleteAccount}},[t._v(" Delete account ")])])]},proxy:!0}])},[s("p",[t._v(" Lorem ipsum dolor sit amet consectetur adipisicing elit. Nulla sed, aliquid debitis nemo aspernatur veniam itaque iusto! Excepturi laudantium commodi cupiditate, delectus repudiandae suscipit, quis quidem odio nostrum rem nam? ")])])],1)},r=[],n={name:"Account",title:function(){return"Account"},methods:{deleteAccount:function(){}}},o=n,i=s("2877"),c=Object(i["a"])(o,a,r,!1,null,null,null);e["default"]=c.exports},a71f:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{attrs:{id:"payment"}},[0!==t.payments.length||t.addNew?t.addNew?a("base-validation-card",{on:{validateAction:t.createNewCard}},[a("fields-iterator",{attrs:{formFields:t.fields},on:{startAction:t.registerChange}})],1):a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[t._l(t.payments,(function(e,s){return a("base-card",{key:e.id,class:{"mt-2":s>=1}},[t._v(" "+t._s(e.id)+" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("button",{staticClass:"btn btn btn-light",on:{click:function(s){return t.deleteCreditCard(e.id)}}},[a("i",{staticClass:"fa fa-trash mr-2"})])])])])})),a("base-card",{staticClass:"text-center mt-2"},[a("button",{staticClass:"btn btn-lg btn-primary",on:{click:function(e){t.addNew=!0}}},[t._v("New card")])])],2)]):a("base-card",{staticClass:"text-center"},[a("h2",{staticClass:"mb-4"},[t._v("You have no payments")]),a("img",{staticClass:"img-fluid",attrs:{src:s("9100"),alt:"payments"}}),a("button",{staticClass:"btn btn-primary btn-lg m-0 mt-4",on:{click:function(e){t.addNew=!0}}},[t._v("Add new")])])],1)},r=[],n=s("5530"),o=s("db95"),i=s("2f62"),c=s("04e7"),d={name:"Payment",components:{BaseValidationCard:o["a"],FieldsIterator:c["a"]},title:function(){return"Payment methods"},data:function(){return{addNew:!1,newCreditCard:{number:"4242424242424242",month:null,year:null,cvv:null},bankAccounts:{},formFieldsFor:"payment"}},computed:Object(n["a"])({},Object(i["e"])("profileModule",{payments:function(t){return t.userDetails.payments}})),methods:{createNewCard:function(){},sendChanges:function(){this.$store.commit("authenticationModule/addNewCreditCard",this.newCreditCard),this.addNew=!1},deleteCreditCard:function(t){this.$store.commit("authenticationModule/deleteCreditCard",t)},registerChange:function(t,e){this.newCreditCard[t]=e}}},l=d,u=s("2877"),p=Object(u["a"])(l,a,r,!1,null,null,null);e["default"]=p.exports},a9e3:function(t,e,s){"use strict";var a=s("83ab"),r=s("da84"),n=s("94ca"),o=s("6eeb"),i=s("5135"),c=s("c6b6"),d=s("7156"),l=s("c04e"),u=s("d039"),p=s("7c73"),m=s("241c").f,f=s("06cf").f,b=s("9bf2").f,h=s("58a8").trim,v="Number",w=r[v],g=w.prototype,C=c(p(g))==v,_=function(t){var e,s,a,r,n,o,i,c,d=l(t,!1);if("string"==typeof d&&d.length>2)if(d=h(d),e=d.charCodeAt(0),43===e||45===e){if(s=d.charCodeAt(2),88===s||120===s)return NaN}else if(48===e){switch(d.charCodeAt(1)){case 66:case 98:a=2,r=49;break;case 79:case 111:a=8,r=55;break;default:return+d}for(n=d.slice(2),o=n.length,i=0;i<o;i++)if(c=n.charCodeAt(i),c<48||c>r)return NaN;return parseInt(n,a)}return+d};if(n(v,!w(" 0o1")||!w("0b1")||w("+0x1"))){for(var y,A=function(t){var e=arguments.length<1?0:t,s=this;return s instanceof A&&(C?u((function(){g.valueOf.call(s)})):c(s)!=v)?d(new w(_(e)),s,A):_(e)},k=a?m(w):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),N=0;k.length>N;N++)i(w,y=k[N])&&!i(A,y)&&b(A,y,f(w,y));A.prototype=g,g.constructor=A,o(r,v,A)}},c65b:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("base-validation-card",{attrs:{buttonName:"Reset password"},on:{validateAction:t.updatePassword}},[s("transition",{attrs:{name:"alert-transition"}},[t.isValid?t._e():s("div",{staticClass:"alert alert-danger"},[t._v(" Passwords do not match ")])]),t._l(t.fields,(function(e){return s("div",{key:e.id,staticClass:"form-group mt-2"},["password1"===e.name?s("label",{staticClass:"mt-3 mb-2",attrs:{for:e.name}},[t._v(" Enter your new password here. It should be different from your old password and should contain at least one. ")]):t._e(),s("input",{directives:[{name:"model",rawName:"v-model",value:t.credentials[e.name],expression:"credentials[field.name]"}],staticClass:"form-control",attrs:{id:e.name,autocomplete:e.autocomplete,placeholder:e.placeholder,"aria-label":e.aria,type:"password"},domProps:{value:t.credentials[e.name]},on:{input:function(s){s.target.composing||t.$set(t.credentials,e.name,s.target.value)}}})])}))],2)},r=[],n=s("5530"),o=s("2f62"),i=s("db95"),c={components:{BaseValidationCard:i["a"]},data:function(){return{credentials:{},fields:[{id:1,name:"old_password",aria:"Current password",autocomplete:"current-password",placeholder:"Current password"},{id:2,name:"password1",aria:"New password",autocomplete:"new-password",placeholder:"New password"},{id:3,name:"password2",aria:"New password",autocomplete:"new-password",placeholder:"New password"}]}},computed:Object(n["a"])(Object(n["a"])({},Object(o["e"])("profileModule",{userId:function(t){return t.userDetails.id}})),{},{isValid:function(){var t=this.credentials,e=t.password1,s=t.password2;return void 0===s||e===s}}),methods:{updatePassword:function(){this.$api.profile.changePassword(this.credentials).then((function(){})).catch((function(){}))}}},d=c,l=(s("c8c3"),s("2877")),u=Object(l["a"])(d,a,r,!1,null,null,null);e["default"]=u.exports},c8c3:function(t,e,s){"use strict";s("301b")},db95:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card"},[t._t("cardHeader"),s("div",{staticClass:"card-content"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[t._t("default")],2)])]),s("footer",{staticClass:"card-footer bg-white text-right"},[s("button",{staticClass:"btn btn-primary mr-2",attrs:{role:"button","aria-label":"Validate"},on:{click:function(e){return t.$emit("validateAction",t.position)}}},[s("font-awesome-icon",{attrs:{icon:"check"}}),t._v(" "+t._s(t.buttonName)+" ")],1)])],2)},r=[],n=(s("a9e3"),{name:"ValidationCard",props:{position:{type:Number,default:0},buttonName:{type:String,default:"Validate"}}}),o=n,i=s("2877"),c=Object(i["a"])(o,a,r,!1,null,null,null);e["a"]=c.exports}}]);
//# sourceMappingURL=profile.5210e950.js.map